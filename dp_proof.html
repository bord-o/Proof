<html>
<head>
<title>Dp.thy</title>
</head>
<body bgcolor="#ffffff">



<pre><font color="#000000"><span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   1 </font></span><font color="#006699"><strong>theory</strong></font> Dp 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   2 </font></span>  <font color="#009966"><strong>imports</strong></font> Main HOL.Set
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   3 </font></span><font color="#009966"><strong>begin</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   4 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">   5 </font></span><font color="#cc0000">(* --- Types --- *)</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   6 </font></span><font color="#006699"><strong>datatype</strong></font> literal <font color="#000000"><strong>=</strong></font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   7 </font></span>  Pos nat
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   8 </font></span>  <font color="#000000"><strong>|</strong></font> Neg nat
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   9 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  10 </font></span><font color="#006699"><strong>instantiation</strong></font> literal <font color="#000000"><strong>::</strong></font> linorder
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  11 </font></span><font color="#009966"><strong>begin</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  12 </font></span><font color="#006699"><strong>fun</strong></font> less_literal <font color="#000000"><strong>::</strong></font> <font color="#ff00cc">&quot;literal &rArr; literal &rArr; bool&quot;</font> <font color="#009966"><strong>where</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  13 </font></span>  <font color="#ff00cc">&quot;less_literal (Pos n) (Pos m) = (n &lt; m)&quot;</font> <font color="#000000"><strong>|</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  14 </font></span>  <font color="#ff00cc">&quot;less_literal (Neg n) (Neg m) = (n &lt; m)&quot;</font> <font color="#000000"><strong>|</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  15 </font></span>  <font color="#ff00cc">&quot;less_literal (Pos n) (Neg m) = False&quot;</font> <font color="#000000"><strong>|</strong></font>     <font color="#cc0000">(* Pos &lt; Neg *)</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  16 </font></span>  <font color="#ff00cc">&quot;less_literal (Neg n) (Pos m) = True&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  17 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  18 </font></span><font color="#006699"><strong>definition</strong></font> less_eq_literal <font color="#000000"><strong>::</strong></font> <font color="#ff00cc">&quot;literal &rArr; literal &rArr; bool&quot;</font> <font color="#009966"><strong>where</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  19 </font></span>  <font color="#ff00cc">&quot;less_eq_literal x y = (x &lt; y &or; x = y)&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  20 </font></span><font color="#006699"><strong>instance</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  21 </font></span><font color="#006699"><strong>proof</strong></font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  22 </font></span>  <font color="#0099ff"><strong>fix</strong></font> x y z <font color="#000000"><strong>::</strong></font> literal
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  23 </font></span>  <font color="#0099ff"><strong>show</strong></font> <font color="#ff00cc">&quot; (x &lt; y) = (x &le; y &and; &not; y &le; x)&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  24 </font></span>    <font color="#006699"><strong>using</strong></font> less_eq_literal_def less_literal.elims<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font> <font color="#006699"><strong>by</strong></font> fastforce
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  25 </font></span><font color="#006699"><strong>next</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  26 </font></span>  <font color="#0099ff"><strong>fix</strong></font> x <font color="#000000"><strong>::</strong></font> literal
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  27 </font></span>  <font color="#0099ff"><strong>show</strong></font> <font color="#ff00cc">&quot;x &le; x&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  28 </font></span>    <font color="#006699"><strong>using</strong></font> less_eq_literal_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  29 </font></span><font color="#006699"><strong>next</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  30 </font></span>  <font color="#0099ff"><strong>fix</strong></font> x y z <font color="#000000"><strong>::</strong></font>literal
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  31 </font></span>  <font color="#0099ff"><strong>show</strong></font> <font color="#ff00cc">&quot; x &le; y &#10233; y &le; z &#10233; x &le; z&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  32 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>verit<font color="#000000"><strong>,</strong></font> ccfv_SIG<font color="#000000"><strong>)</strong></font> less_eq_literal_def less_literal.elims<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> literal.distinct<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> literal.inject<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>,</strong></font>2<font color="#000000"><strong>)</strong></font> order_less_trans<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  33 </font></span><font color="#006699"><strong>next</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  34 </font></span>  <font color="#0099ff"><strong>fix</strong></font> x y <font color="#000000"><strong>::</strong></font> literal
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  35 </font></span>  <font color="#0099ff"><strong>show</strong></font> <font color="#ff00cc">&quot;x &le; y &#10233; y &le; x &#10233; x = y&quot;</font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  36 </font></span>    <font color="#006699"><strong>using</strong></font> less_eq_literal_def less_literal.elims<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font> <font color="#006699"><strong>by</strong></font> fastforce
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  37 </font></span><font color="#006699"><strong>next</strong></font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  38 </font></span>  <font color="#0099ff"><strong>fix</strong></font> x y <font color="#000000"><strong>::</strong></font>literal
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  39 </font></span>  <font color="#0099ff"><strong>show</strong></font> <font color="#ff00cc">&quot; x &le; y &or; y &le; x&quot;</font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  40 </font></span>    <font color="#006699"><strong>using</strong></font> less_eq_literal_def less_literal.elims<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> literal.inject<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>,</strong></font>2<font color="#000000"><strong>)</strong></font> <font color="#006699"><strong>by</strong></font> fastforce
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  41 </font></span>    
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  42 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  43 </font></span><font color="#009966"><strong>end</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  44 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  45 </font></span><font color="#006699"><strong>type_synonym</strong></font> clause <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;literal set&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  46 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  47 </font></span><font color="#006699"><strong>type_synonym</strong></font> &Phi; <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;clause set&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  48 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  49 </font></span><font color="#006699"><strong>datatype</strong></font> result <font color="#000000"><strong>=</strong></font> Sat <font color="#000000"><strong>|</strong></font> Unsat
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  50 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  51 </font></span><font color="#006699"><strong>type_synonym</strong></font> assignment <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;nat &rArr; bool&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  52 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  53 </font></span><font color="#cc0000">(* --- Helpers --- *)</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  54 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  55 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  56 </font></span><font color="#006699"><strong>fun</strong></font> eval_literal <font color="#000000"><strong>::</strong></font> <font color="#ff00cc">&quot;assignment &rArr; literal &rArr; bool&quot;</font> <font color="#009966"><strong>where</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  57 </font></span>  <font color="#ff00cc">&quot;eval_literal &sigma; (Pos n) = &sigma; n&quot;</font> <font color="#000000"><strong>|</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  58 </font></span>  <font color="#ff00cc">&quot;eval_literal &sigma; (Neg n) = (&not;(&sigma; n))&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  59 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  60 </font></span><font color="#006699"><strong>fun</strong></font> eval_clause <font color="#000000"><strong>::</strong></font> <font color="#ff00cc">&quot;assignment &rArr; clause &rArr; bool&quot;</font> <font color="#009966"><strong>where</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  61 </font></span>  <font color="#ff00cc">&quot;eval_clause &sigma; c = (&exist;l &isin; c. eval_literal &sigma; l)&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  62 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  63 </font></span><font color="#006699"><strong>fun</strong></font> eval_formula <font color="#000000"><strong>::</strong></font> <font color="#ff00cc">&quot;assignment &rArr; &Phi; &rArr; bool&quot;</font> <font color="#009966"><strong>where</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  64 </font></span>  <font color="#ff00cc">&quot;eval_formula &sigma; f = (&forall;c &isin; f. eval_clause &sigma; c)&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  65 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  66 </font></span><font color="#006699"><strong>definition</strong></font> satisfiable <font color="#000000"><strong>::</strong></font> <font color="#ff00cc">&quot;&Phi; &rArr; bool&quot;</font> <font color="#009966"><strong>where</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  67 </font></span>  <font color="#ff00cc">&quot;satisfiable f = (&exist;&sigma;. eval_formula &sigma; f)&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  68 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  69 </font></span><font color="#006699"><strong>fun</strong></font> opposite_lit <font color="#000000"><strong>::</strong></font> <font color="#ff00cc">&quot;literal &rArr; literal&quot;</font> <font color="#009966"><strong>where</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  70 </font></span>  <font color="#ff00cc">&quot;opposite_lit (Pos n) = Neg n&quot;</font> <font color="#000000"><strong>|</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  71 </font></span>  <font color="#ff00cc">&quot;opposite_lit (Neg n) = Pos n&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  72 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  73 </font></span><font color="#006699"><strong>fun</strong></font> index_of_lit <font color="#000000"><strong>::</strong></font> <font color="#ff00cc">&quot;literal &rArr; nat&quot;</font> <font color="#009966"><strong>where</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  74 </font></span>  <font color="#ff00cc">&quot;index_of_lit (Pos n) = n&quot;</font> <font color="#000000"><strong>|</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  75 </font></span>  <font color="#ff00cc">&quot;index_of_lit (Neg n) = n&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  76 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  77 </font></span><font color="#006699"><strong>definition</strong></font> has_empty_clause <font color="#000000"><strong>::</strong></font> <font color="#ff00cc">&quot;&Phi; &rArr; bool&quot;</font> <font color="#009966"><strong>where</strong></font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  78 </font></span>  <font color="#ff00cc">&quot;has_empty_clause f = (&exist;c &isin; f. card c = 0)&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  79 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  80 </font></span><font color="#cc0000">(* --- Unit Propagation --- *)</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  81 </font></span><font color="#006699"><strong>definition</strong></font> is_unit_clause <font color="#000000"><strong>::</strong></font> <font color="#ff00cc">&quot;clause &rArr; bool&quot;</font> <font color="#009966"><strong>where</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  82 </font></span>  <font color="#ff00cc">&quot;is_unit_clause c = (card c = 1)&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  83 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  84 </font></span><font color="#006699"><strong>fun</strong></font>  unit_literals <font color="#000000"><strong>::</strong></font> <font color="#ff00cc">&quot;&Phi; &rArr; literal set&quot;</font> <font color="#009966"><strong>where</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  85 </font></span>  <font color="#ff00cc">&quot;unit_literals f = the_elem ` {c.  c &isin; f &and; is_unit_clause c}&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  86 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  87 </font></span><font color="#006699"><strong>lemma</strong></font> <font color="#009966"><strong>fixes</strong></font> f c <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;c &isin; f &and; card c = 1&quot;</font> <font color="#009966"><strong>shows</strong></font> <font color="#ff00cc">&quot;(the_elem c) &isin; unit_literals f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  88 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> assms is_unit_clause_def<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  89 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  90 </font></span><font color="#006699"><strong>lemma</strong></font> unit_literals_sound<font color="#000000"><strong>:</strong></font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  91 </font></span>  <font color="#009966"><strong>fixes</strong></font> f l 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  92 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;finite f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  93 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;l &isin; unit_literals f&quot;</font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  94 </font></span>  <font color="#009966"><strong>shows</strong></font> <font color="#ff00cc">&quot;&exist;c. c &isin; f &and; card c = 1 &and; l = the_elem c&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  95 </font></span><font color="#006699"><strong>proof</strong></font> -
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  96 </font></span>  <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  97 </font></span>    <font color="#006699"><strong>using</strong></font> assms<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font> is_unit_clause_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  98 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  99 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 100 </font></span><font color="#006699"><strong>definition</strong></font> unit_prop_step <font color="#000000"><strong>::</strong></font> <font color="#ff00cc">&quot;&Phi; &rArr; literal &rArr; &Phi;&quot;</font> <font color="#009966"><strong>where</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 101 </font></span>  <font color="#ff00cc">&quot;unit_prop_step f uc = (</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 102 </font></span><font color="#ff00cc">    if card f = 0 then f else</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 103 </font></span><font color="#ff00cc">      let pos_filt = {clause &isin; f. uc &notin; clause} in </font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 104 </font></span><font color="#ff00cc">      let neg_lit = opposite_lit uc in</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 105 </font></span><font color="#ff00cc">      let neg_filt = {clause &isin; pos_filt. neg_lit &isin; clause} in </font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 106 </font></span><font color="#ff00cc">      (pos_filt - neg_filt) &cup; {(&lambda;c. c - {neg_lit}) clause | clause. clause &isin; neg_filt })&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 107 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 108 </font></span><font color="#006699"><strong>lemma</strong></font> unit_prop_empty<font color="#000000"><strong>:</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 109 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;finite f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 110 </font></span>  <font color="#009966"><strong>shows</strong></font> <font color="#ff00cc">&quot;&forall;l. unit_prop_step {} l = {}&quot;</font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 111 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> unit_prop_step_def<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 112 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 113 </font></span><font color="#006699"><strong>lemma</strong></font> subset_union_card<font color="#000000"><strong>:</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 114 </font></span>  <font color="#009966"><strong>fixes</strong></font> a b c f
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 115 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;a &sube; c&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 116 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;b &sube; a&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 117 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;finite c&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 118 </font></span>  <font color="#009966"><strong>shows</strong></font> <font color="#ff00cc">&quot;card(a - b &cup; (f ` b)) &le; card c&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 119 </font></span><font color="#006699"><strong>proof</strong></font> -
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 120 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;card (a - b) + card b = card a&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 121 </font></span>    <font color="#006699"><strong>using</strong></font> assms<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>,</strong></font>3<font color="#000000"><strong>,</strong></font>1<font color="#000000"><strong>)</strong></font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 122 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis card_Diff_subset card_mono le_add_diff_inverse2 rev_finite_subset<font color="#000000"><strong>)</strong></font>    
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 123 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;card (a - b &cup; (f ` b)) &le; card (a - b) + card (f ` b)&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 124 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>rule card_Un_le<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 125 </font></span>  <font color="#006699"><strong>also</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;... &le; card (a - b) + card b&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 126 </font></span>    <font color="#006699"><strong>using</strong></font> card_image_le <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>meson add_left_mono assms finite_subset order_trans<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 127 </font></span>  <font color="#006699"><strong>also</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;... = card a&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 128 </font></span>    <font color="#006699"><strong>using</strong></font> <font color="#cc00cc">`card (a - b) + card b = card a`</font> <font color="#006699"><strong>by</strong></font> simp
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 129 </font></span>  <font color="#006699"><strong>also</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;... &le; card c&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 130 </font></span>    <font color="#006699"><strong>using</strong></font> assms <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> card_mono<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 131 </font></span>  <font color="#006699"><strong>finally</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>.</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 132 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 133 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 134 </font></span><font color="#006699"><strong>lemma</strong></font> unit_prop_no_grow<font color="#000000"><strong>:</strong></font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 135 </font></span>  <font color="#009966"><strong>fixes</strong></font> f l
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 136 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;finite f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 137 </font></span>  <font color="#009966"><strong>shows</strong></font> <font color="#ff00cc">&quot;card (unit_prop_step f l) &le; card f&quot;</font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 138 </font></span><font color="#006699"><strong>proof</strong></font> -
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 139 </font></span>  <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 140 </font></span>  <font color="#006699"><strong>proof</strong></font> <font color="#000000"><strong>(</strong></font>cases <font color="#ff00cc">&quot;card f = 0&quot;</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 141 </font></span>    <font color="#0099ff"><strong>case</strong></font> True
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 142 </font></span>    <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>using</strong></font> unit_prop_empty assms
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 143 </font></span>      <font color="#006699"><strong>by</strong></font> fastforce
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 144 </font></span>  <font color="#006699"><strong>next</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 145 </font></span>    <font color="#0099ff"><strong>case</strong></font> False
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 146 </font></span>    <font color="#006699"><strong>let</strong></font> ?not_containing_l <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;{clause &isin; f. l &notin; clause}&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 147 </font></span>    <font color="#006699"><strong>let</strong></font> ?containing_opp_l <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;{clause &isin; f. l &notin; clause &and; opposite_lit l &isin; clause}&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 148 </font></span>    <font color="#006699"><strong>let</strong></font> ?reduced_clauses <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;{clause - {opposite_lit l} |clause. clause &isin; f &and; l &notin; clause &and; opposite_lit l &isin; clause}&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 149 </font></span>    
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 150 </font></span>    <font color="#006699"><strong>have</strong></font> subset1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?containing_opp_l &sube; ?not_containing_l&quot;</font> <font color="#006699"><strong>by</strong></font> blast
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 151 </font></span>    <font color="#006699"><strong>have</strong></font> subset2<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?not_containing_l &sube; f&quot;</font> <font color="#006699"><strong>by</strong></font> blast
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 152 </font></span>    
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 153 </font></span>    <font color="#006699"><strong>have</strong></font> image_form<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?reduced_clauses = (&lambda;clause. clause - {opposite_lit l}) ` ?containing_opp_l&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 154 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>auto simp<font color="#000000"><strong>:</strong></font> setcompr_eq_image<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 155 </font></span>    
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 156 </font></span>    <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;unit_prop_step f l = (?not_containing_l - ?containing_opp_l) &cup; ?reduced_clauses&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 157 </font></span>      <font color="#006699"><strong>unfolding</strong></font> unit_prop_step_def
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 158 </font></span>      <font color="#006699"><strong>apply</strong></font><font color="#000000"><strong>(</strong></font>simp_all add<font color="#000000"><strong>:</strong></font>Let_def<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 159 </font></span>      <font color="#006699"><strong>using</strong></font> False <font color="#006699"><strong>by</strong></font> blast
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 160 </font></span>    
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 161 </font></span>    <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;card (unit_prop_step f l) = card ((?not_containing_l - ?containing_opp_l) &cup; ?reduced_clauses)&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 162 </font></span>      <font color="#006699"><strong>using</strong></font> <font color="#cc00cc">`unit_prop_step f l = (?not_containing_l - ?containing_opp_l) &cup; ?reduced_clauses`</font> <font color="#006699"><strong>by</strong></font> simp
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 163 </font></span>    <font color="#006699"><strong>also</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;... = card ((?not_containing_l - ?containing_opp_l) &cup; ((&lambda;clause. clause - {opposite_lit l}) ` ?containing_opp_l))&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 164 </font></span>      <font color="#006699"><strong>using</strong></font> image_form <font color="#006699"><strong>by</strong></font> simp
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 165 </font></span>    <font color="#006699"><strong>also</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;... &le; card f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 166 </font></span>      <font color="#006699"><strong>using</strong></font> subset_union_card<font color="#000000"><strong>[</strong></font>OF subset2 subset1 assms<font color="#000000"><strong>]</strong></font> <font color="#006699"><strong>by</strong></font> simp
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 167 </font></span>    <font color="#006699"><strong>finally</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>.</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 168 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 169 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 170 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 171 </font></span><font color="#006699"><strong>lemma</strong></font> unit_lits_gone<font color="#000000"><strong>:</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 172 </font></span>  <font color="#009966"><strong>fixes</strong></font> f l
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 173 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;finite f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 174 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;{l} &isin; f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 175 </font></span>  <font color="#009966"><strong>shows</strong></font> <font color="#ff00cc">&quot;{l} &notin; unit_prop_step f l&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 176 </font></span><font color="#006699"><strong>proof</strong></font> -
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 177 </font></span>  <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 178 </font></span>  <font color="#006699"><strong>proof</strong></font> <font color="#000000"><strong>(</strong></font>cases <font color="#ff00cc">&quot;card f = 0&quot;</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 179 </font></span>    <font color="#0099ff"><strong>case</strong></font> True
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 180 </font></span>    <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 181 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> assms unit_prop_step_def<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 182 </font></span>  <font color="#006699"><strong>next</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 183 </font></span>    <font color="#0099ff"><strong>case</strong></font> False
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 184 </font></span>    <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 185 </font></span>      <font color="#006699"><strong>unfolding</strong></font> unit_prop_step_def
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 186 </font></span>      <font color="#006699"><strong>apply</strong></font><font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font>Let_def assms<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 187 </font></span>      <font color="#006699"><strong>by</strong></font> blast
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 188 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 189 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 190 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 191 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 192 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 193 </font></span><font color="#006699"><strong>lemma</strong></font> unit_prop_no_grow_plus<font color="#000000"><strong>:</strong></font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 194 </font></span>  <font color="#009966"><strong>fixes</strong></font> f l
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 195 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;finite f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 196 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;{l} &isin; f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 197 </font></span>  <font color="#009966"><strong>shows</strong></font> <font color="#ff00cc">&quot;card (unit_prop_step f l) &lt; card f&quot;</font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 198 </font></span><font color="#006699"><strong>proof</strong></font> -
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 199 </font></span>  <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 200 </font></span>  <font color="#006699"><strong>proof</strong></font> <font color="#000000"><strong>(</strong></font>cases <font color="#ff00cc">&quot;card f = 0&quot;</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 201 </font></span>    <font color="#0099ff"><strong>case</strong></font> True
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 202 </font></span>    <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>using</strong></font> unit_prop_empty assms
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 203 </font></span>      <font color="#006699"><strong>by</strong></font> fastforce
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 204 </font></span>  <font color="#006699"><strong>next</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 205 </font></span>    <font color="#0099ff"><strong>case</strong></font> False
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 206 </font></span>    <font color="#006699"><strong>let</strong></font> ?not_containing_l <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;{clause &isin; f. l &notin; clause}&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 207 </font></span>    <font color="#006699"><strong>let</strong></font> ?containing_opp_l <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;{clause &isin; f. l &notin; clause &and; opposite_lit l &isin; clause}&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 208 </font></span>    <font color="#006699"><strong>let</strong></font> ?reduced_clauses <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;{clause - {opposite_lit l} |clause. clause &isin; f &and; l &notin; clause &and; opposite_lit l &isin; clause}&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 209 </font></span>    
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 210 </font></span>    <font color="#006699"><strong>have</strong></font> subset1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?containing_opp_l &sube; ?not_containing_l&quot;</font> <font color="#006699"><strong>by</strong></font> blast
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 211 </font></span>    <font color="#006699"><strong>have</strong></font> subset2<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?not_containing_l &sube; f&quot;</font> <font color="#006699"><strong>by</strong></font> blast
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 212 </font></span>    
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 213 </font></span>    <font color="#006699"><strong>have</strong></font> image_form<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?reduced_clauses = (&lambda;clause. clause - {opposite_lit l}) ` ?containing_opp_l&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 214 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>auto simp<font color="#000000"><strong>:</strong></font> setcompr_eq_image<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 215 </font></span>    
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 216 </font></span>    <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;unit_prop_step f l = (?not_containing_l - ?containing_opp_l) &cup; ?reduced_clauses&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 217 </font></span>      <font color="#006699"><strong>unfolding</strong></font> unit_prop_step_def
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 218 </font></span>      <font color="#006699"><strong>apply</strong></font><font color="#000000"><strong>(</strong></font>simp_all add<font color="#000000"><strong>:</strong></font>Let_def<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 219 </font></span>      <font color="#006699"><strong>using</strong></font> False <font color="#006699"><strong>by</strong></font> blast
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 220 </font></span>    
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 221 </font></span>    <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;card (unit_prop_step f l) = card ((?not_containing_l - ?containing_opp_l) &cup; ?reduced_clauses)&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 222 </font></span>      <font color="#006699"><strong>using</strong></font> <font color="#cc00cc">`unit_prop_step f l = (?not_containing_l - ?containing_opp_l) &cup; ?reduced_clauses`</font> <font color="#006699"><strong>by</strong></font> simp
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 223 </font></span>    <font color="#006699"><strong>also</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;... = card ((?not_containing_l - ?containing_opp_l) &cup; ((&lambda;clause. clause - {opposite_lit l}) ` ?containing_opp_l))&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 224 </font></span>      <font color="#006699"><strong>using</strong></font> image_form <font color="#006699"><strong>by</strong></font> simp
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 225 </font></span>    <font color="#006699"><strong>also</strong></font> <font color="#006699"><strong>have</strong></font> 1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;card {clause &isin; f. l &notin; clause} &lt; card f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 226 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> assms<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>,</strong></font>2<font color="#000000"><strong>)</strong></font> insertI1 mem_Collect_eq psubsetI psubset_card_mono subset2<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 227 </font></span>    <font color="#006699"><strong>also</strong></font> <font color="#006699"><strong>have</strong></font> 2<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?thesis&quot;</font> <font color="#006699"><strong>using</strong></font> assms 1
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 228 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>lifting<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 229 </font></span>          <font color="#6600cc">&lsaquo;</font><font color="#6600cc">c</font><font color="#6600cc">a</font><font color="#6600cc">r</font><font color="#6600cc">d</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">u</font><font color="#6600cc">n</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">_</font><font color="#6600cc">p</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">p</font><font color="#6600cc">_</font><font color="#6600cc">s</font><font color="#6600cc">t</font><font color="#6600cc">e</font><font color="#6600cc">p</font><font color="#6600cc"> </font><font color="#6600cc">f</font><font color="#6600cc"> </font><font color="#6600cc">l</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">=</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">a</font><font color="#6600cc">r</font><font color="#6600cc">d</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">{</font><font color="#6600cc">c</font><font color="#6600cc">l</font><font color="#6600cc">a</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">&isin;</font><font color="#6600cc"> </font><font color="#6600cc">f</font><font color="#6600cc">.</font><font color="#6600cc"> </font><font color="#6600cc">l</font><font color="#6600cc"> </font><font color="#6600cc">&notin;</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">l</font><font color="#6600cc">a</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc">}</font><font color="#6600cc"> </font><font color="#6600cc">-</font><font color="#6600cc"> </font><font color="#6600cc">{</font><font color="#6600cc">c</font><font color="#6600cc">l</font><font color="#6600cc">a</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">&isin;</font><font color="#6600cc"> </font><font color="#6600cc">f</font><font color="#6600cc">.</font><font color="#6600cc"> </font><font color="#6600cc">l</font><font color="#6600cc"> </font><font color="#6600cc">&notin;</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">l</font><font color="#6600cc">a</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">&and;</font><font color="#6600cc"> </font><font color="#6600cc">o</font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc">o</font><font color="#6600cc">s</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">l</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc"> </font><font color="#6600cc">l</font><font color="#6600cc"> </font><font color="#6600cc">&isin;</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">l</font><font color="#6600cc">a</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc">}</font><font color="#6600cc"> </font><font color="#6600cc">&cup;</font><font color="#6600cc"> </font><font color="#6600cc">{</font><font color="#6600cc">c</font><font color="#6600cc">l</font><font color="#6600cc">a</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">-</font><font color="#6600cc"> </font><font color="#6600cc">{</font><font color="#6600cc">o</font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc">o</font><font color="#6600cc">s</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">l</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc"> </font><font color="#6600cc">l</font><font color="#6600cc">}</font><font color="#6600cc"> </font><font color="#6600cc">|</font><font color="#6600cc">c</font><font color="#6600cc">l</font><font color="#6600cc">a</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc">.</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">l</font><font color="#6600cc">a</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">&isin;</font><font color="#6600cc"> </font><font color="#6600cc">f</font><font color="#6600cc"> </font><font color="#6600cc">&and;</font><font color="#6600cc"> </font><font color="#6600cc">l</font><font color="#6600cc"> </font><font color="#6600cc">&notin;</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">l</font><font color="#6600cc">a</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">&and;</font><font color="#6600cc"> </font><font color="#6600cc">o</font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc">o</font><font color="#6600cc">s</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">l</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc"> </font><font color="#6600cc">l</font><font color="#6600cc"> </font><font color="#6600cc">&isin;</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">l</font><font color="#6600cc">a</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc">}</font><font color="#6600cc">)</font><font color="#6600cc">&rsaquo;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 230 </font></span>          <font color="#6600cc">&lsaquo;</font><font color="#6600cc">c</font><font color="#6600cc">a</font><font color="#6600cc">r</font><font color="#6600cc">d</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">{</font><font color="#6600cc">c</font><font color="#6600cc">l</font><font color="#6600cc">a</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">&isin;</font><font color="#6600cc"> </font><font color="#6600cc">f</font><font color="#6600cc">.</font><font color="#6600cc"> </font><font color="#6600cc">l</font><font color="#6600cc"> </font><font color="#6600cc">&notin;</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">l</font><font color="#6600cc">a</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc">}</font><font color="#6600cc"> </font><font color="#6600cc">-</font><font color="#6600cc"> </font><font color="#6600cc">{</font><font color="#6600cc">c</font><font color="#6600cc">l</font><font color="#6600cc">a</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">&isin;</font><font color="#6600cc"> </font><font color="#6600cc">f</font><font color="#6600cc">.</font><font color="#6600cc"> </font><font color="#6600cc">l</font><font color="#6600cc"> </font><font color="#6600cc">&notin;</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">l</font><font color="#6600cc">a</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">&and;</font><font color="#6600cc"> </font><font color="#6600cc">o</font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc">o</font><font color="#6600cc">s</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">l</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc"> </font><font color="#6600cc">l</font><font color="#6600cc"> </font><font color="#6600cc">&isin;</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">l</font><font color="#6600cc">a</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc">}</font><font color="#6600cc"> </font><font color="#6600cc">&cup;</font><font color="#6600cc"> </font><font color="#6600cc">{</font><font color="#6600cc">c</font><font color="#6600cc">l</font><font color="#6600cc">a</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">-</font><font color="#6600cc"> </font><font color="#6600cc">{</font><font color="#6600cc">o</font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc">o</font><font color="#6600cc">s</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">l</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc"> </font><font color="#6600cc">l</font><font color="#6600cc">}</font><font color="#6600cc"> </font><font color="#6600cc">|</font><font color="#6600cc">c</font><font color="#6600cc">l</font><font color="#6600cc">a</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc">.</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">l</font><font color="#6600cc">a</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">&isin;</font><font color="#6600cc"> </font><font color="#6600cc">f</font><font color="#6600cc"> </font><font color="#6600cc">&and;</font><font color="#6600cc"> </font><font color="#6600cc">l</font><font color="#6600cc"> </font><font color="#6600cc">&notin;</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">l</font><font color="#6600cc">a</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">&and;</font><font color="#6600cc"> </font><font color="#6600cc">o</font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc">o</font><font color="#6600cc">s</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">l</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc"> </font><font color="#6600cc">l</font><font color="#6600cc"> </font><font color="#6600cc">&isin;</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">l</font><font color="#6600cc">a</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc">}</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">=</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">a</font><font color="#6600cc">r</font><font color="#6600cc">d</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">{</font><font color="#6600cc">c</font><font color="#6600cc">l</font><font color="#6600cc">a</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">&isin;</font><font color="#6600cc"> </font><font color="#6600cc">f</font><font color="#6600cc">.</font><font color="#6600cc"> </font><font color="#6600cc">l</font><font color="#6600cc"> </font><font color="#6600cc">&notin;</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">l</font><font color="#6600cc">a</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc">}</font><font color="#6600cc"> </font><font color="#6600cc">-</font><font color="#6600cc"> </font><font color="#6600cc">{</font><font color="#6600cc">c</font><font color="#6600cc">l</font><font color="#6600cc">a</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">&isin;</font><font color="#6600cc"> </font><font color="#6600cc">f</font><font color="#6600cc">.</font><font color="#6600cc"> </font><font color="#6600cc">l</font><font color="#6600cc"> </font><font color="#6600cc">&notin;</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">l</font><font color="#6600cc">a</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">&and;</font><font color="#6600cc"> </font><font color="#6600cc">o</font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc">o</font><font color="#6600cc">s</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">l</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc"> </font><font color="#6600cc">l</font><font color="#6600cc"> </font><font color="#6600cc">&isin;</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">l</font><font color="#6600cc">a</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc">}</font><font color="#6600cc"> </font><font color="#6600cc">&cup;</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">&lambda;</font><font color="#6600cc">c</font><font color="#6600cc">l</font><font color="#6600cc">a</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc">.</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">l</font><font color="#6600cc">a</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">-</font><font color="#6600cc"> </font><font color="#6600cc">{</font><font color="#6600cc">o</font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc">o</font><font color="#6600cc">s</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">l</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc"> </font><font color="#6600cc">l</font><font color="#6600cc">}</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">`</font><font color="#6600cc"> </font><font color="#6600cc">{</font><font color="#6600cc">c</font><font color="#6600cc">l</font><font color="#6600cc">a</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">&isin;</font><font color="#6600cc"> </font><font color="#6600cc">f</font><font color="#6600cc">.</font><font color="#6600cc"> </font><font color="#6600cc">l</font><font color="#6600cc"> </font><font color="#6600cc">&notin;</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">l</font><font color="#6600cc">a</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">&and;</font><font color="#6600cc"> </font><font color="#6600cc">o</font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc">o</font><font color="#6600cc">s</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">l</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc"> </font><font color="#6600cc">l</font><font color="#6600cc"> </font><font color="#6600cc">&isin;</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">l</font><font color="#6600cc">a</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc">}</font><font color="#6600cc">)</font><font color="#6600cc">&rsaquo;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 231 </font></span>          dual_order.refl le_eq_less_or_eq linorder_not_less rev_finite_subset subset1 subset2 subset_union_card<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 232 </font></span>     <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>using</strong></font> 2 <font color="#006699"><strong>.</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 233 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 234 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 235 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 236 </font></span><font color="#006699"><strong>lemma</strong></font> neg_lits_filtered<font color="#000000"><strong>:</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 237 </font></span>  <font color="#009966"><strong>fixes</strong></font> f l
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 238 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;finite f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 239 </font></span>  <font color="#009966"><strong>shows</strong></font> <font color="#ff00cc">&quot;&forall;c &isin; (unit_prop_step f l). opposite_lit l &notin; c&quot;</font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 240 </font></span><font color="#006699"><strong>proof</strong></font> -
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 241 </font></span>  <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 242 </font></span>  <font color="#006699"><strong>proof</strong></font> <font color="#000000"><strong>(</strong></font>cases <font color="#ff00cc">&quot;card f = 0&quot;</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 243 </font></span>    <font color="#0099ff"><strong>case</strong></font> True
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 244 </font></span>    <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 245 </font></span>      <font color="#006699"><strong>using</strong></font> unit_prop_empty assms <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 246 </font></span>  <font color="#006699"><strong>next</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 247 </font></span>    <font color="#0099ff"><strong>case</strong></font> False
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 248 </font></span>    <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 249 </font></span>      <font color="#006699"><strong>unfolding</strong></font> unit_prop_step_def
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 250 </font></span>      <font color="#006699"><strong>using</strong></font> assms 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 251 </font></span>      <font color="#006699"><strong>apply</strong></font><font color="#000000"><strong>(</strong></font>simp_all add<font color="#000000"><strong>:</strong></font>unit_prop_empty DiffE UnE  singletonI Let_def<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 252 </font></span>      <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 253 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 254 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 255 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 256 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 257 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 258 </font></span><font color="#006699"><strong>lemma</strong></font> literal_not_in_formula<font color="#000000"><strong>:</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 259 </font></span>  <font color="#009966"><strong>fixes</strong></font> f l
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 260 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;finite f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 261 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;&forall;c &isin; f. l &notin; c &and; opposite_lit l &notin; c&quot;</font>  <font color="#cc0000">(* l doesn't appear at all *)</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 262 </font></span>  <font color="#009966"><strong>shows</strong></font> <font color="#ff00cc">&quot;unit_prop_step f l = f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 263 </font></span><font color="#006699"><strong>proof</strong></font> -
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 264 </font></span>  <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 265 </font></span>  <font color="#006699"><strong>proof</strong></font> <font color="#000000"><strong>(</strong></font>cases <font color="#ff00cc">&quot;card f = 0&quot;</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 266 </font></span>    <font color="#0099ff"><strong>case</strong></font> True
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 267 </font></span>    <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 268 </font></span>      <font color="#006699"><strong>using</strong></font> unit_prop_step_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 269 </font></span>  <font color="#006699"><strong>next</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 270 </font></span>    <font color="#0099ff"><strong>case</strong></font> False
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 271 </font></span>    <font color="#006699"><strong>have</strong></font> 1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;{clause &isin; f. l &notin; clause} = f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 272 </font></span>      <font color="#006699"><strong>using</strong></font> assms<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font> <font color="#006699"><strong>by</strong></font> blast
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 273 </font></span>    <font color="#006699"><strong>have</strong></font> 2<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;{clause &isin; f. l &notin; clause &and; opposite_lit l &isin; clause} = {}&quot;</font>  
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 274 </font></span>      <font color="#006699"><strong>using</strong></font> assms <font color="#006699"><strong>by</strong></font> simp 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 275 </font></span>    <font color="#006699"><strong>have</strong></font> 3<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;{clause &isin; f. opposite_lit l &isin; clause} = {}&quot;</font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 276 </font></span>      <font color="#006699"><strong>using</strong></font> assms 1 2 <font color="#006699"><strong>by</strong></font> blast
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 277 </font></span>    <font color="#006699"><strong>have</strong></font> 4<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;f - {clause &isin; f. opposite_lit l &isin; clause} = f&quot;</font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 278 </font></span>      <font color="#006699"><strong>using</strong></font> assms 1 2 3 <font color="#006699"><strong>by</strong></font> blast
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 279 </font></span>    <font color="#006699"><strong>have</strong></font> 5<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot; {clause - {opposite_lit l} |clause. clause &isin; f &and; opposite_lit l &isin; clause} = {}&quot;</font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 280 </font></span>      <font color="#006699"><strong>using</strong></font> assms 1 2 3 4 <font color="#006699"><strong>by</strong></font> blast
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 281 </font></span>    <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 282 </font></span>      <font color="#006699"><strong>unfolding</strong></font> unit_prop_step_def
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 283 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp_all add<font color="#000000"><strong>:</strong></font>assms 1 2 3 4 5<font color="#000000"><strong>)</strong></font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 284 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 285 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 286 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 287 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 288 </font></span><font color="#006699"><strong>definition</strong></font> unit_prop <font color="#000000"><strong>::</strong></font> <font color="#ff00cc">&quot;&Phi; &rArr; &Phi;&quot;</font> <font color="#009966"><strong>where</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 289 </font></span>  <font color="#ff00cc">&quot;unit_prop f = (let lits = unit_literals f in if card lits = 0 then f else unit_prop_step f ( Max lits))&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 290 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 291 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 292 </font></span><font color="#006699"><strong>definition</strong></font>  has_unit_prop <font color="#000000"><strong>::</strong></font> <font color="#ff00cc">&quot;&Phi; &rArr; bool&quot;</font> <font color="#009966"><strong>where</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 293 </font></span>  <font color="#ff00cc">&quot;has_unit_prop f = (card (unit_literals f) &ne; 0 )&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 294 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 295 </font></span><font color="#006699"><strong>lemma</strong></font> <font color="#ff00cc">&quot;is_unit_clause {Pos 0}&quot;</font> <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> is_unit_clause_def<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 296 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 297 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 298 </font></span><font color="#006699"><strong>lemma</strong></font> unit_prop_step_shrink_apply<font color="#000000"><strong>:</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 299 </font></span>  <font color="#009966"><strong>fixes</strong></font> f l
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 300 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;finite f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 301 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;has_unit_prop f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 302 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;l &isin; unit_literals f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 303 </font></span>  <font color="#009966"><strong>shows</strong></font> <font color="#ff00cc">&quot;card (unit_prop_step f l) &lt; card f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 304 </font></span><font color="#006699"><strong>proof</strong></font> <font color="#000000"><strong>(</strong></font>cases <font color="#ff00cc">&quot;card f = 0&quot;</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 305 </font></span>  <font color="#0099ff"><strong>case</strong></font> True
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 306 </font></span>  <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 307 </font></span>    <font color="#006699"><strong>using</strong></font> assms<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>,</strong></font>2<font color="#000000"><strong>)</strong></font> has_unit_prop_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 308 </font></span><font color="#006699"><strong>next</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 309 </font></span>  <font color="#0099ff"><strong>case</strong></font> False
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 310 </font></span>  <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 311 </font></span>  <font color="#006699"><strong>proof</strong></font> -
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 312 </font></span>    <font color="#006699"><strong>let</strong></font> ?up <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;unit_prop_step f l&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 313 </font></span>    <font color="#006699"><strong>have</strong></font> 1<font color="#000000"><strong>:</strong></font>  <font color="#ff00cc">&quot;{l} &notin; ?up&quot;</font> <font color="#006699"><strong>using</strong></font> assms<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> unit_lits_gone<font color="#000000"><strong>[</strong></font>of f l<font color="#000000"><strong>]</strong></font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 314 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis One_nat_def assms<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> card_1_singleton_iff the_elem_eq unit_literals_sound<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 315 </font></span>    <font color="#006699"><strong>have</strong></font> 2<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;{l} &isin; f &quot;</font> <font color="#006699"><strong>using</strong></font> assms<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 316 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis One_nat_def assms<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> card_1_singleton_iff the_elem_eq unit_literals_sound<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 317 </font></span>    <font color="#006699"><strong>have</strong></font> 3<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;card (f - {{l}}) &lt; card f&quot;</font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 318 </font></span>      <font color="#006699"><strong>using</strong></font> <font color="#ff00cc">&quot;2&quot;</font> False <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 319 </font></span>    <font color="#006699"><strong>have</strong></font> 4<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;card (?up) &le; card f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 320 </font></span>      <font color="#006699"><strong>using</strong></font> assms<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> unit_prop_no_grow<font color="#000000"><strong>[</strong></font>of f l<font color="#000000"><strong>]</strong></font> 1 <font color="#006699"><strong>by</strong></font> blast
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 321 </font></span>    <font color="#006699"><strong>have</strong></font> 5<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;card ?up &ne; card f&quot;</font> <font color="#006699"><strong>using</strong></font> unit_prop_no_grow_plus
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 322 </font></span>      <font color="#006699"><strong>using</strong></font> <font color="#ff00cc">&quot;2&quot;</font> assms<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> nat_less_le <font color="#006699"><strong>by</strong></font> blast
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 323 </font></span>    <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>using</strong></font> 1 2 4 5 unit_lits_gone<font color="#000000"><strong>[</strong></font>of f l<font color="#000000"><strong>]</strong></font> unit_prop_no_grow_plus <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 324 </font></span>  <font color="#006699"><strong>qed</strong></font>    
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 325 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 326 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 327 </font></span><font color="#006699"><strong>lemma</strong></font> unit_prop_shrink_apply<font color="#000000"><strong>:</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 328 </font></span>  <font color="#009966"><strong>fixes</strong></font> f
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 329 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;finite f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 330 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;has_unit_prop f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 331 </font></span>  <font color="#009966"><strong>shows</strong></font> <font color="#ff00cc">&quot;card (unit_prop f) &lt; card f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 332 </font></span><font color="#006699"><strong>proof</strong></font> <font color="#000000"><strong>(</strong></font>cases <font color="#ff00cc">&quot;card f = 0&quot;</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 333 </font></span>  <font color="#0099ff"><strong>case</strong></font> True
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 334 </font></span>  <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 335 </font></span>    <font color="#006699"><strong>using</strong></font> assms<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>,</strong></font>2<font color="#000000"><strong>)</strong></font> has_unit_prop_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 336 </font></span><font color="#006699"><strong>next</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 337 </font></span>  <font color="#0099ff"><strong>case</strong></font> False
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 338 </font></span>  <font color="#006699"><strong>let</strong></font> ?ul <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;unit_literals f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 339 </font></span>  <font color="#006699"><strong>let</strong></font> ?choice <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;Max ?ul&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 340 </font></span>  <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 341 </font></span>    <font color="#006699"><strong>unfolding</strong></font> unit_prop_def
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 342 </font></span>    <font color="#006699"><strong>using</strong></font> assms unit_prop_step_shrink_apply<font color="#000000"><strong>[</strong></font>of f choice<font color="#000000"><strong>]</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 343 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> has_unit_prop_def unit_prop_step_shrink_apply<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 344 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 345 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 346 </font></span><font color="#006699"><strong>fun</strong></font> all_literals <font color="#000000"><strong>::</strong></font> <font color="#ff00cc">&quot;&Phi; &rArr; literal set&quot;</font> <font color="#009966"><strong>where</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 347 </font></span>  <font color="#ff00cc">&quot;all_literals f = Union f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 348 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 349 </font></span><font color="#006699"><strong>lemma</strong></font> unit_prop_no_grow_lits<font color="#000000"><strong>:</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 350 </font></span>  <font color="#009966"><strong>fixes</strong></font> f
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 351 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;finite f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 352 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;has_unit_prop f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 353 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;&forall;c &isin; f. finite c&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 354 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;&not;has_empty_clause f&quot;</font> <font color="#cc0000">(* This is essential to refute the case where f has the empty set *)</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 355 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;card f &ne; 0&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 356 </font></span>  <font color="#009966"><strong>shows</strong></font> <font color="#ff00cc">&quot;card (all_literals (unit_prop f)) &le; card (all_literals f)&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 357 </font></span><font color="#006699"><strong>proof</strong></font> -
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 358 </font></span>  <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 359 </font></span>  <font color="#006699"><strong>proof</strong></font> -
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 360 </font></span>    <font color="#006699"><strong>let</strong></font> ?all <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;all_literals f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 361 </font></span>    <font color="#006699"><strong>let</strong></font> ?after <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;all_literals (unit_prop f)&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 362 </font></span>    <font color="#006699"><strong>have</strong></font> 1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&#8708;l. l &isin; ?after &and; l &notin; ?all&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 363 </font></span>      <font color="#006699"><strong>using</strong></font> unit_prop_def  unit_prop_step_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 364 </font></span>    <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 365 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#ff00cc">&quot;1&quot;</font> all_literals.simps assms<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>,</strong></font>3<font color="#000000"><strong>)</strong></font> card_mono finite_Union subsetI<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 366 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 367 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 368 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 369 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 370 </font></span><font color="#cc0000">(* --- Pure Literal Elimination --- *)</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 371 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 372 </font></span><font color="#006699"><strong>fun</strong></font> pure_literals <font color="#000000"><strong>::</strong></font> <font color="#ff00cc">&quot;&Phi; &rArr; literal set&quot;</font> <font color="#009966"><strong>where</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 373 </font></span>  <font color="#ff00cc">&quot;pure_literals f = (let all = all_literals f in { l &isin; all. (opposite_lit l) &notin; all })&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 374 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 375 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 376 </font></span><font color="#006699"><strong>definition</strong></font> has_literal_elim <font color="#000000"><strong>::</strong></font> <font color="#ff00cc">&quot;&Phi; &rArr; bool&quot;</font> <font color="#009966"><strong>where</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 377 </font></span>  <font color="#ff00cc">&quot;has_literal_elim f = (card (pure_literals f) &ne; 0)&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 378 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 379 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 380 </font></span><font color="#006699"><strong>fun</strong></font> literal_elim <font color="#000000"><strong>::</strong></font> <font color="#ff00cc">&quot;&Phi; &rArr; &Phi;&quot;</font> <font color="#009966"><strong>where</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 381 </font></span>  <font color="#ff00cc">&quot;literal_elim f = (</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 382 </font></span><font color="#ff00cc">    let pure = pure_literals f in</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 383 </font></span><font color="#ff00cc">    { c. c &isin; f &and; (disjnt c pure)}</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 384 </font></span><font color="#ff00cc">  )&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 385 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 386 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 387 </font></span><font color="#006699"><strong>lemma</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 388 </font></span>  <font color="#009966"><strong>fixes</strong></font> f
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 389 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;finite f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 390 </font></span>  <font color="#009966"><strong>shows</strong></font> <font color="#ff00cc">&quot;pure_literals f &sube; all_literals f&quot;</font> <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 391 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 392 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 393 </font></span><font color="#006699"><strong>lemma</strong></font> form_not_empty_lits_exist<font color="#000000"><strong>:</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 394 </font></span>  <font color="#009966"><strong>fixes</strong></font> f
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 395 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;finite f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 396 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;card f &ne; 0&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 397 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;&forall;s &isin; f. finite s&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 398 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;&not;has_empty_clause f&quot;</font> <font color="#cc0000">(* This is essential to refute the case where f has the empty set *)</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 399 </font></span>  <font color="#009966"><strong>shows</strong></font> <font color="#ff00cc">&quot;card (all_literals f) &ne; 0&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 400 </font></span><font color="#006699"><strong>proof</strong></font> -
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 401 </font></span>  <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 402 </font></span>  <font color="#006699"><strong>proof</strong></font> -
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 403 </font></span>    <font color="#006699"><strong>have</strong></font> 1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;{} &notin; f&quot;</font> <font color="#006699"><strong>using</strong></font> has_empty_clause_def assms <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 404 </font></span>    <font color="#006699"><strong>have</strong></font> 2<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;finite f &#10233; {} &notin; f &#10233; card f &ne; 0 &#10233; card (all_literals f) &ne; 0&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 405 </font></span>    <font color="#006699"><strong>proof</strong></font> -
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 406 </font></span>      <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;f &ne; {}&quot;</font> <font color="#006699"><strong>using</strong></font> assms <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> card_gt_0_iff<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 407 </font></span>      <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>obtain</strong></font> A <font color="#009966"><strong>where</strong></font> <font color="#ff00cc">&quot;A &isin; f&quot;</font> <font color="#006699"><strong>by</strong></font> blast
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 408 </font></span>      <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;A &ne; {}&quot;</font> <font color="#006699"><strong>using</strong></font> <font color="#cc00cc">`A &isin; f`</font> <font color="#cc00cc">`{} &notin; f`</font> <font color="#006699"><strong>by</strong></font> blast
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 409 </font></span>      <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;A &sube; &#8899;f&quot;</font> <font color="#006699"><strong>using</strong></font> <font color="#cc00cc">`A &isin; f`</font> <font color="#006699"><strong>by</strong></font> blast
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 410 </font></span>      <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&#8899;f &ne; {}&quot;</font> <font color="#006699"><strong>using</strong></font> <font color="#cc00cc">`A &sube; &#8899;f`</font> <font color="#cc00cc">`A &ne; {}`</font> <font color="#006699"><strong>by</strong></font> blast
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 411 </font></span>      <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;finite (&#8899;f)&quot;</font> <font color="#006699"><strong>using</strong></font>  assms <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 412 </font></span>      <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;0 &lt; card (&#8899;f)&quot;</font> <font color="#006699"><strong>using</strong></font> <font color="#6600cc">&lsaquo;</font><font color="#6600cc">&#8899;</font><font color="#6600cc"> </font><font color="#6600cc">f</font><font color="#6600cc"> </font><font color="#6600cc">&ne;</font><font color="#6600cc"> </font><font color="#6600cc">{</font><font color="#6600cc">}</font><font color="#6600cc">&rsaquo;</font> <font color="#6600cc">&lsaquo;</font><font color="#6600cc">f</font><font color="#6600cc">i</font><font color="#6600cc">n</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">&#8899;</font><font color="#6600cc"> </font><font color="#6600cc">f</font><font color="#6600cc">)</font><font color="#6600cc">&rsaquo;</font> <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 413 </font></span>      <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> <font color="#6600cc">&lsaquo;</font><font color="#6600cc">0</font><font color="#6600cc"> </font><font color="#6600cc">&lt;</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">a</font><font color="#6600cc">r</font><font color="#6600cc">d</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">&#8899;</font><font color="#6600cc"> </font><font color="#6600cc">f</font><font color="#6600cc">)</font><font color="#6600cc">&rsaquo;</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 414 </font></span>    <font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 415 </font></span>    <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 416 </font></span>      <font color="#006699"><strong>using</strong></font> <font color="#ff00cc">&quot;1&quot;</font> assms<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>,</strong></font>2<font color="#000000"><strong>)</strong></font> <font color="#006699"><strong>by</strong></font> blast     
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 417 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 418 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 419 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 420 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 421 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 422 </font></span><font color="#006699"><strong>lemma</strong></font> literal_elim_no_grow_lits<font color="#000000"><strong>:</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 423 </font></span>  <font color="#009966"><strong>fixes</strong></font> f
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 424 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;finite f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 425 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;has_literal_elim f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 426 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;&forall;c &isin; f. finite c&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 427 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;&not;has_empty_clause f&quot;</font> <font color="#cc0000">(* This is essential to refute the case where f has the empty set *)</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 428 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;card f &ne; 0&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 429 </font></span>  <font color="#009966"><strong>shows</strong></font> <font color="#ff00cc">&quot;card (all_literals (literal_elim f)) &le; card (all_literals f)&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 430 </font></span><font color="#006699"><strong>proof</strong></font> -
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 431 </font></span>  <font color="#0099ff"><strong>show</strong></font> ?thesis 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 432 </font></span>  <font color="#006699"><strong>proof</strong></font> -
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 433 </font></span>    <font color="#006699"><strong>let</strong></font> ?pure <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;pure_literals f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 434 </font></span>    <font color="#006699"><strong>let</strong></font> ?impure_clauses <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;{c &isin; f. &not; disjnt c ?pure}&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 435 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 436 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 437 </font></span>    <font color="#006699"><strong>have</strong></font> 1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;card ?pure &ne; 0&quot;</font> <font color="#006699"><strong>using</strong></font> assms<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 438 </font></span>      <font color="#006699"><strong>unfolding</strong></font> has_literal_elim_def <font color="#006699"><strong>by</strong></font> simp
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 439 </font></span>    <font color="#006699"><strong>have</strong></font> 2<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;card (all_literals f) &ne; 0&quot;</font> <font color="#006699"><strong>using</strong></font> assms form_not_empty_lits_exist <font color="#006699"><strong>by</strong></font> simp
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 440 </font></span>    <font color="#006699"><strong>have</strong></font> 4<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&exist;c &isin; f. &not; disjnt c ?pure&quot;</font> <font color="#006699"><strong>using</strong></font> has_literal_elim_def assms 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 441 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> Set.set_insert all_literals.elims card_eq_0_iff disjnt_Union1 disjnt_insert2
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 442 </font></span>          mem_Collect_eq obtains_Max pure_literals.simps<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 443 </font></span>    <font color="#006699"><strong>have</strong></font> 5<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;card ?impure_clauses &ne; 0&quot;</font> <font color="#006699"><strong>using</strong></font> assms 4 <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 444 </font></span>    <font color="#006699"><strong>have</strong></font> 6<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;literal_elim f = f - ?impure_clauses&quot;</font> <font color="#006699"><strong>using</strong></font> assms <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 445 </font></span>    <font color="#006699"><strong>have</strong></font> 7<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;card ?impure_clauses &ne; 0 &#10233; card (f - ?impure_clauses) &lt; card f&quot;</font> <font color="#006699"><strong>using</strong></font> 6 assms 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 446 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> <font color="#ff00cc">&quot;4&quot;</font> DiffD2 Diff_subset card_seteq linorder_not_le mem_Collect_eq<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 447 </font></span>    <font color="#006699"><strong>have</strong></font> 10<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;disjnt ?pure (all_literals (f - ?impure_clauses))&quot;</font> <font color="#006699"><strong>using</strong></font> disjnt_sym <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 448 </font></span>    <font color="#006699"><strong>have</strong></font> 11<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&exist;l &isin; ?pure. l &notin; (all_literals (f - ?impure_clauses))&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 449 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>lifting<font color="#000000"><strong>)</strong></font> <font color="#ff00cc">&quot;1&quot;</font> <font color="#ff00cc">&quot;10&quot;</font> all_not_in_conv card_eq_0_iff disjnt_iff<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 450 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 451 </font></span>    <font color="#006699"><strong>have</strong></font> 14<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&#8708;l. l&isin; (all_literals (f - ?impure_clauses)) &and; l &notin; all_literals f&quot;</font> <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 452 </font></span>    <font color="#006699"><strong>have</strong></font> 15<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;card (all_literals (f - ?impure_clauses)) &le; card (all_literals f)&quot;</font> <font color="#006699"><strong>using</strong></font> 10 11 14 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 453 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>meson <font color="#ff00cc">&quot;2&quot;</font> card_eq_0_iff card_mono subsetI<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 454 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 455 </font></span>    <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 456 </font></span>      <font color="#006699"><strong>using</strong></font> assms 15 6  <font color="#006699"><strong>by</strong></font> argo
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 457 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 458 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 459 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 460 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 461 </font></span><font color="#006699"><strong>lemma</strong></font> literal_elim_shrink_apply_clauses<font color="#000000"><strong>:</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 462 </font></span>  <font color="#009966"><strong>fixes</strong></font> f
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 463 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;finite f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 464 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;has_literal_elim f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 465 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;card f &ne; 0&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 466 </font></span>  <font color="#009966"><strong>shows</strong></font> <font color="#ff00cc">&quot;card ( (literal_elim f)) &lt; card ( f)&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 467 </font></span><font color="#006699"><strong>proof</strong></font> -
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 468 </font></span>  <font color="#0099ff"><strong>show</strong></font> ?thesis 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 469 </font></span>  <font color="#006699"><strong>proof</strong></font> -
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 470 </font></span>    <font color="#006699"><strong>let</strong></font> ?pure <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;pure_literals f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 471 </font></span>    <font color="#006699"><strong>let</strong></font> ?impure_clauses <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;{c &isin; f. &not; disjnt c ?pure}&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 472 </font></span>    <font color="#006699"><strong>have</strong></font> 4<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&exist;c &isin; f. &not; disjnt c ?pure&quot;</font> <font color="#006699"><strong>using</strong></font> has_literal_elim_def assms 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 473 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> Set.set_insert all_literals.elims card_eq_0_iff disjnt_Union1 disjnt_insert2
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 474 </font></span>          mem_Collect_eq obtains_Max pure_literals.simps<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 475 </font></span>    <font color="#006699"><strong>have</strong></font> 5<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;card ?impure_clauses &ne; 0&quot;</font> <font color="#006699"><strong>using</strong></font> assms 4 <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 476 </font></span>    <font color="#006699"><strong>have</strong></font> 6<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;literal_elim f = f - ?impure_clauses&quot;</font> <font color="#006699"><strong>using</strong></font> assms <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 477 </font></span>    <font color="#006699"><strong>have</strong></font> 7<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;card ?impure_clauses &ne; 0 &#10233; card (f - ?impure_clauses) &lt; card f&quot;</font> <font color="#006699"><strong>using</strong></font> 6 assms 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 478 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> <font color="#ff00cc">&quot;4&quot;</font> DiffD2 Diff_subset card_seteq linorder_not_le mem_Collect_eq<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 479 </font></span>    <font color="#006699"><strong>have</strong></font> 8<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;card (literal_elim f) &lt; card f&quot;</font> <font color="#006699"><strong>using</strong></font> assms 5 6 7 <font color="#006699"><strong>by</strong></font> auto 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 480 </font></span>    <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>using</strong></font> 8 <font color="#006699"><strong>.</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 481 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 482 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 483 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 484 </font></span><font color="#cc0000">(* --- Non Normal Elimination --- *)</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 485 </font></span><font color="#006699"><strong>definition</strong></font> clause_has_non_normal <font color="#000000"><strong>::</strong></font> <font color="#ff00cc">&quot;clause &rArr; bool&quot;</font> <font color="#009966"><strong>where</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 486 </font></span>  <font color="#ff00cc">&quot;clause_has_non_normal c = ( &exist;lit &isin; c. opposite_lit lit &isin; c)&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 487 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 488 </font></span><font color="#006699"><strong>definition</strong></font> has_non_normal <font color="#000000"><strong>::</strong></font> <font color="#ff00cc">&quot;&Phi; &rArr; bool&quot;</font>  <font color="#009966"><strong>where</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 489 </font></span>   <font color="#ff00cc">&quot;has_non_normal f = ( &exist;clause &isin; f. clause_has_non_normal clause )&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 490 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 491 </font></span><font color="#006699"><strong>definition</strong></font> non_normal_elim <font color="#000000"><strong>::</strong></font> <font color="#ff00cc">&quot;&Phi; &rArr; &Phi;&quot;</font> <font color="#009966"><strong>where</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 492 </font></span>  <font color="#ff00cc">&quot;non_normal_elim f = {c &isin; f. &not; (clause_has_non_normal c)} &quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 493 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 494 </font></span><font color="#006699"><strong>lemma</strong></font> non_norm_shrink_apply<font color="#000000"><strong>:</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 495 </font></span>  <font color="#009966"><strong>fixes</strong></font> f
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 496 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;finite f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 497 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;has_non_normal f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 498 </font></span>  <font color="#009966"><strong>shows</strong></font> <font color="#ff00cc">&quot;card (non_normal_elim f) &lt; card f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 499 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>mono_tags<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> Collect_mem_eq Collect_mono_iff assms<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>,</strong></font>2<font color="#000000"><strong>)</strong></font> has_non_normal_def non_normal_elim_def psubsetI
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 500 </font></span>      psubset_card_mono<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 501 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 502 </font></span><font color="#006699"><strong>lemma</strong></font> non_norm_elim_no_grow_lits<font color="#000000"><strong>:</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 503 </font></span>  <font color="#009966"><strong>fixes</strong></font> f
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 504 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;finite f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 505 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;has_non_normal f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 506 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;&forall;c &isin; f. finite c&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 507 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;&not;has_empty_clause f&quot;</font> <font color="#cc0000">(* This is essential to refute the case where f has the empty set *)</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 508 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;card f &ne; 0&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 509 </font></span>  <font color="#009966"><strong>shows</strong></font> <font color="#ff00cc">&quot;card (all_literals (non_normal_elim f)) &le; card (all_literals f)&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 510 </font></span><font color="#006699"><strong>proof</strong></font> -
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 511 </font></span>  
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 512 </font></span>  <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 513 </font></span>  <font color="#006699"><strong>proof</strong></font> -
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 514 </font></span>    <font color="#006699"><strong>let</strong></font> ?all <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;all_literals f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 515 </font></span>    <font color="#006699"><strong>let</strong></font> ?after <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;all_literals (non_normal_elim f)&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 516 </font></span>    <font color="#006699"><strong>have</strong></font> 1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&#8708;l. l &isin; ?after &and; l &notin; ?all&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 517 </font></span>      <font color="#006699"><strong>using</strong></font> non_normal_elim_def <font color="#006699"><strong>by</strong></font> fastforce
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 518 </font></span>    <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 519 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>meson <font color="#ff00cc">&quot;1&quot;</font> assms<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>,</strong></font>4<font color="#000000"><strong>,</strong></font>5<font color="#000000"><strong>)</strong></font> card.infinite card_mono form_not_empty_lits_exist subsetI<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 520 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 521 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 522 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 523 </font></span><font color="#cc0000">(* --- Resolution --- *)</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 524 </font></span><font color="#006699"><strong>fun</strong></font> resolution_pairs <font color="#000000"><strong>::</strong></font> <font color="#ff00cc">&quot;&Phi; &rArr; literal  &rArr; (literal set * literal set) set&quot;</font> <font color="#009966"><strong>where</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 525 </font></span>  <font color="#ff00cc">&quot;resolution_pairs f choice = (</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 526 </font></span><font color="#ff00cc">    let pos_clauses = {c &isin; f. choice &isin; c} in</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 527 </font></span><font color="#ff00cc">    let neg_clauses = {c &isin; f. (opposite_lit choice &isin; c)} in</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 528 </font></span><font color="#ff00cc">    let res_pairs = {Pair a b | a b. a &isin; pos_clauses &and; b &isin; neg_clauses} in</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 529 </font></span><font color="#ff00cc">    res_pairs</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 530 </font></span><font color="#ff00cc">  )&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 531 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 532 </font></span><font color="#006699"><strong>fun</strong></font> resolve <font color="#000000"><strong>::</strong></font> <font color="#ff00cc">&quot;&Phi; &rArr; &Phi;&quot;</font> <font color="#009966"><strong>where</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 533 </font></span>  <font color="#ff00cc">&quot;resolve f = (</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 534 </font></span><font color="#ff00cc">    let all = all_literals f in</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 535 </font></span><font color="#ff00cc">    let pure = pure_literals f in</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 536 </font></span><font color="#ff00cc">    let choice = Min (all - pure) in</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 537 </font></span><font color="#ff00cc">    let op_choice = opposite_lit choice in</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 538 </font></span><font color="#ff00cc">    let pairs = resolution_pairs f choice in</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 539 </font></span><font color="#ff00cc">    let additions = { (fst p &cup; snd p) - {choice, op_choice} |p. p &isin; pairs } in</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 540 </font></span><font color="#ff00cc">    let sans_lit = {  c. c &isin; f &and; choice &notin; c &and; op_choice &notin; c} in</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 541 </font></span><font color="#ff00cc">    additions &cup; sans_lit</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 542 </font></span><font color="#ff00cc">)&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 543 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 544 </font></span><font color="#006699"><strong>lemma</strong></font> resolve_shrink_apply_lits<font color="#000000"><strong>:</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 545 </font></span>  <font color="#009966"><strong>fixes</strong></font> f
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 546 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;finite f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 547 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;&forall;c &isin; f. finite c&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 548 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;&not;has_literal_elim f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 549 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;&not;has_empty_clause f&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 550 </font></span>  <font color="#009966"><strong>assumes</strong></font> <font color="#ff00cc">&quot;card f &ne; 0&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 551 </font></span>  <font color="#009966"><strong>shows</strong></font> <font color="#ff00cc">&quot;card (all_literals (resolve f)) &lt; card (all_literals f)&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 552 </font></span><font color="#006699"><strong>proof</strong></font> -
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 553 </font></span>  <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 554 </font></span>  <font color="#006699"><strong>proof</strong></font> -
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 555 </font></span>    <font color="#006699"><strong>let</strong></font> ?all <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;all_literals f &quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 556 </font></span>    <font color="#006699"><strong>let</strong></font> ?pure <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;pure_literals f &quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 557 </font></span>    <font color="#006699"><strong>let</strong></font> ?diff <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;?all - ?pure&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 558 </font></span>    <font color="#006699"><strong>let</strong></font> ?choice <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;Min (?all - ?pure) &quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 559 </font></span>    <font color="#006699"><strong>let</strong></font> ?op_choice <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;opposite_lit ?choice &quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 560 </font></span>    <font color="#006699"><strong>let</strong></font> ?pairs <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;resolution_pairs f ?choice &quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 561 </font></span>    <font color="#006699"><strong>let</strong></font> ?additions <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;{ (fst p &cup; snd p) - {?choice, ?op_choice} |p. p &isin; ?pairs } &quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 562 </font></span>    <font color="#006699"><strong>let</strong></font> ?sans_lit <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;{  c. c &isin; f &and; ?choice &notin; c &and; ?op_choice &notin; c} &quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 563 </font></span>    <font color="#006699"><strong>let</strong></font> ?res <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;?additions &cup; ?sans_lit&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 564 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 565 </font></span>    <font color="#006699"><strong>have</strong></font> 1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?choice &notin; all_literals ?res&quot;</font> <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 566 </font></span>    <font color="#006699"><strong>have</strong></font> 2<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?op_choice &notin; all_literals ?res&quot;</font> <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 567 </font></span>    <font color="#006699"><strong>have</strong></font> 3<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&#8708;l. l &isin; ?pure &and; l &notin; ?all&quot;</font> <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 568 </font></span>    <font color="#006699"><strong>have</strong></font> 4<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;finite ?diff&quot;</font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 569 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> assms<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>,</strong></font>2<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 570 </font></span>    <font color="#006699"><strong>have</strong></font> 5<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;card ?pure = 0&quot;</font> <font color="#006699"><strong>using</strong></font> assms <font color="#006699"><strong>unfolding</strong></font> has_literal_elim_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 571 </font></span>    <font color="#006699"><strong>have</strong></font> 6<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?choice &isin; (?all - ?pure)&quot;</font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 572 </font></span>      <font color="#006699"><strong>using</strong></font> assms
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 573 </font></span>      <font color="#006699"><strong>unfolding</strong></font> has_empty_clause_def
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 574 </font></span>      <font color="#006699"><strong>unfolding</strong></font> has_literal_elim_def 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 575 </font></span>      <font color="#006699"><strong>using</strong></font> assms Min_in<font color="#000000"><strong>[</strong></font>of ?diff<font color="#000000"><strong>]</strong></font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 576 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#ff00cc">&quot;3&quot;</font> <font color="#ff00cc">&quot;4&quot;</font> Diff_empty double_diff form_not_empty_lits_exist subsetI<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 577 </font></span>    <font color="#006699"><strong>have</strong></font> 7<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&#8708;l. l &isin; (all_literals ?res) &and; l &notin; ?all&quot;</font> <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 578 </font></span>    <font color="#006699"><strong>have</strong></font> 8<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&exist;l. l &isin; ?all &and; l &notin; (all_literals ?res)&quot;</font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 579 </font></span>      <font color="#006699"><strong>using</strong></font> 6 1
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 580 </font></span>      <font color="#006699"><strong>by</strong></font> blast
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 581 </font></span>    <font color="#006699"><strong>have</strong></font> 9<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;all_literals ?res &sub; ?all&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 582 </font></span>      <font color="#006699"><strong>using</strong></font> 7 8
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 583 </font></span>       <font color="#006699"><strong>by</strong></font> blast
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 584 </font></span>    <font color="#006699"><strong>have</strong></font> 10<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;card (all_literals ?res) &lt; card ?all&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 585 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>lifting<font color="#000000"><strong>)</strong></font> <font color="#ff00cc">&quot;9&quot;</font> all_literals.simps assms<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>,</strong></font>2<font color="#000000"><strong>)</strong></font> card_seteq finite_Union linorder_not_le
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 586 </font></span>          order_less_le<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 587 </font></span>    <font color="#0099ff"><strong>show</strong></font> ?thesis       
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 588 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#ff00cc">&quot;10&quot;</font> resolve.simps<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 589 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 590 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 591 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 592 </font></span><font color="#cc0000">(* DP *)</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 593 </font></span><font color="#006699"><strong>function</strong></font> dp <font color="#000000"><strong>::</strong></font> <font color="#ff00cc">&quot;&Phi; &rArr; result&quot;</font> <font color="#009966"><strong>where</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 594 </font></span>  <font color="#ff00cc">&quot;dp f = </font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 595 </font></span><font color="#ff00cc">    (if card f = 0 then Sat else </font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 596 </font></span><font color="#ff00cc">    if has_empty_clause f then Unsat else </font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 597 </font></span><font color="#ff00cc">    if has_non_normal f then dp (non_normal_elim f) else</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 598 </font></span><font color="#ff00cc">    if has_unit_prop f then dp (unit_prop f) else</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 599 </font></span><font color="#ff00cc">    if has_literal_elim f then dp (literal_elim f) else</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 600 </font></span><font color="#ff00cc">    dp (resolve f)</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 601 </font></span><font color="#ff00cc">)&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 602 </font></span>  <font color="#006699"><strong>by</strong></font> pat_completeness auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 603 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 604 </font></span><font color="#006699"><strong>termination</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 605 </font></span><font color="#006699"><strong>proof</strong></font> <font color="#000000"><strong>(</strong></font>relation <font color="#ff00cc">&quot;measures [ &lambda;f. card (all_literals f),  &lambda;f. card f]&quot;</font><font color="#000000"><strong>,</strong></font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 606 </font></span>       goal_cases WF TAUT UP PLE RES<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 607 </font></span>  <font color="#0099ff"><strong>case</strong></font> WF  
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 608 </font></span>  <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?case <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 609 </font></span><font color="#006699"><strong>next</strong></font>  
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 610 </font></span>  <font color="#0099ff"><strong>case</strong></font> <font color="#000000"><strong>(</strong></font>TAUT form<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 611 </font></span>  <font color="#0099ff"><strong>show</strong></font> ?case
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 612 </font></span>  <font color="#006699"><strong>proof</strong></font> -
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 613 </font></span>    <font color="#006699"><strong>have</strong></font> 1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;finite form &or; card form = 0&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 614 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis card.infinite<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 615 </font></span>    <font color="#006699"><strong>have</strong></font> 2<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;finite form&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 616 </font></span>      <font color="#006699"><strong>using</strong></font> <font color="#ff00cc">&quot;1&quot;</font> TAUT<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 617 </font></span>    <font color="#006699"><strong>have</strong></font> alt1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&forall;c &isin; form. finite c &or; card c = 0&quot;</font> <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis card.infinite<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 618 </font></span>    <font color="#006699"><strong>have</strong></font> alt2<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&forall;c &isin; form. card c &ne; 0&quot;</font> <font color="#006699"><strong>using</strong></font> TAUT alt1 <font color="#006699"><strong>unfolding</strong></font> has_empty_clause_def
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 619 </font></span>      <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 620 </font></span>    <font color="#006699"><strong>have</strong></font> alt3<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&forall; c &isin; form. finite c&quot;</font> <font color="#006699"><strong>using</strong></font> alt1 alt2 <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 621 </font></span>    <font color="#006699"><strong>have</strong></font> 3<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;card (non_normal_elim form) &lt; card form&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 622 </font></span>      <font color="#006699"><strong>using</strong></font> TAUT non_norm_shrink_apply<font color="#000000"><strong>[</strong></font>of form<font color="#000000"><strong>]</strong></font> 1 <font color="#006699"><strong>by</strong></font> simp
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 623 </font></span>    <font color="#006699"><strong>have</strong></font> 4<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;card (all_literals (non_normal_elim form)) &le; card (all_literals form)&quot;</font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 624 </font></span>      <font color="#006699"><strong>using</strong></font> TAUT non_norm_elim_no_grow_lits<font color="#000000"><strong>[</strong></font>of form<font color="#000000"><strong>]</strong></font>  alt3 <font color="#006699"><strong>by</strong></font> fastforce
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 625 </font></span>    <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 626 </font></span>      <font color="#006699"><strong>using</strong></font> 3 4 <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 627 </font></span>  <font color="#006699"><strong>qed</strong></font>   
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 628 </font></span><font color="#006699"><strong>next</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 629 </font></span>  <font color="#0099ff"><strong>case</strong></font> <font color="#000000"><strong>(</strong></font>UP form<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 630 </font></span>  <font color="#0099ff"><strong>show</strong></font> ?case
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 631 </font></span>    <font color="#006699"><strong>proof</strong></font> -
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 632 </font></span>    <font color="#006699"><strong>have</strong></font> 1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;finite form &or; card form = 0&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 633 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis card.infinite<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 634 </font></span>    <font color="#006699"><strong>have</strong></font> 2<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;finite form&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 635 </font></span>      <font color="#006699"><strong>using</strong></font> <font color="#ff00cc">&quot;1&quot;</font> UP<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 636 </font></span>    <font color="#006699"><strong>have</strong></font> alt1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&forall;c &isin; form. finite c &or; card c = 0&quot;</font> <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis card.infinite<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 637 </font></span>    <font color="#006699"><strong>have</strong></font> alt2<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&forall;c &isin; form. card c &ne; 0&quot;</font> <font color="#006699"><strong>using</strong></font> UP alt1 <font color="#006699"><strong>unfolding</strong></font> has_empty_clause_def
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 638 </font></span>      <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 639 </font></span>    <font color="#006699"><strong>have</strong></font> alt3<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&forall; c &isin; form. finite c&quot;</font> <font color="#006699"><strong>using</strong></font> alt1 alt2 <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 640 </font></span>    <font color="#006699"><strong>have</strong></font> 3<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;card (unit_prop form) &lt; card form&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 641 </font></span>      <font color="#006699"><strong>using</strong></font> UP 2 unit_prop_shrink_apply<font color="#000000"><strong>[</strong></font>of form<font color="#000000"><strong>]</strong></font> <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 642 </font></span>    <font color="#006699"><strong>have</strong></font> 4<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;card (all_literals (unit_prop form)) &le; card (all_literals form)&quot;</font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 643 </font></span>      <font color="#006699"><strong>using</strong></font> UP alt3 unit_prop_no_grow_lits<font color="#000000"><strong>[</strong></font>of form<font color="#000000"><strong>]</strong></font> <font color="#006699"><strong>by</strong></font> fastforce
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 644 </font></span>    <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 645 </font></span>      <font color="#006699"><strong>using</strong></font> 3 4 <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 646 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 647 </font></span><font color="#006699"><strong>next</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 648 </font></span>  <font color="#0099ff"><strong>case</strong></font> <font color="#000000"><strong>(</strong></font>PLE form<font color="#000000"><strong>)</strong></font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 649 </font></span>  <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?case 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 650 </font></span>  <font color="#006699"><strong>proof</strong></font> -
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 651 </font></span>    <font color="#006699"><strong>have</strong></font> 1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;finite form &or; card form = 0&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 652 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis card.infinite<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 653 </font></span>    <font color="#006699"><strong>have</strong></font> 2<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;finite form&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 654 </font></span>      <font color="#006699"><strong>using</strong></font> <font color="#ff00cc">&quot;1&quot;</font> PLE<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 655 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 656 </font></span>    <font color="#006699"><strong>have</strong></font> alt1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&forall;c &isin; form. finite c &or; card c = 0&quot;</font> <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis card.infinite<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 657 </font></span>    <font color="#006699"><strong>have</strong></font> alt2<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&forall;c &isin; form. card c &ne; 0&quot;</font> <font color="#006699"><strong>using</strong></font> PLE alt1 <font color="#006699"><strong>unfolding</strong></font> has_empty_clause_def
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 658 </font></span>      <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 659 </font></span>    <font color="#006699"><strong>have</strong></font> alt3<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&forall; c &isin; form. finite c&quot;</font> <font color="#006699"><strong>using</strong></font> alt1 alt2 <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 660 </font></span>    <font color="#006699"><strong>have</strong></font> 3<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;card (literal_elim form) &lt; card form&quot;</font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 661 </font></span>      <font color="#006699"><strong>using</strong></font> PLE 2 literal_elim_shrink_apply_clauses<font color="#000000"><strong>[</strong></font>of form<font color="#000000"><strong>]</strong></font> <font color="#006699"><strong>by</strong></font> blast
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 662 </font></span>    <font color="#006699"><strong>have</strong></font> 4<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;card (all_literals (literal_elim form)) &le; card (all_literals form)&quot;</font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 663 </font></span>      <font color="#006699"><strong>using</strong></font> alt3 PLE literal_elim_no_grow_lits<font color="#000000"><strong>[</strong></font>of form<font color="#000000"><strong>]</strong></font> <font color="#006699"><strong>by</strong></font> fastforce
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 664 </font></span>    <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 665 </font></span>      <font color="#006699"><strong>using</strong></font> 3 4 <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 666 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 667 </font></span><font color="#006699"><strong>next</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 668 </font></span>  <font color="#0099ff"><strong>case</strong></font> <font color="#000000"><strong>(</strong></font>RES form<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 669 </font></span>  <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?case 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 670 </font></span>  <font color="#006699"><strong>proof</strong></font> -
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 671 </font></span>    <font color="#006699"><strong>have</strong></font> 1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;finite form &or; card form = 0&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 672 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis card.infinite<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 673 </font></span>    <font color="#006699"><strong>have</strong></font> 2<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;finite form&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 674 </font></span>      <font color="#006699"><strong>using</strong></font> <font color="#ff00cc">&quot;1&quot;</font> RES<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 675 </font></span>    <font color="#006699"><strong>have</strong></font> alt1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&forall;c &isin; form. finite c &or; card c = 0&quot;</font> <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis card.infinite<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 676 </font></span>    <font color="#006699"><strong>have</strong></font> alt2<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&forall;c &isin; form. card c &ne; 0&quot;</font> <font color="#006699"><strong>using</strong></font> RES alt1 <font color="#006699"><strong>unfolding</strong></font> has_empty_clause_def
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 677 </font></span>      <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 678 </font></span>    <font color="#006699"><strong>have</strong></font> alt3<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&forall; c &isin; form. finite c&quot;</font> <font color="#006699"><strong>using</strong></font> alt1 alt2 <font color="#006699"><strong>by</strong></font> auto
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 679 </font></span>    <font color="#006699"><strong>have</strong></font> 1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;card (all_literals (resolve form)) &lt; card (all_literals form)&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 680 </font></span>      <font color="#006699"><strong>using</strong></font> RES resolve_shrink_apply_lits<font color="#000000"><strong>[</strong></font>of form<font color="#000000"><strong>]</strong></font> alt3 <font color="#006699"><strong>by</strong></font> fastforce
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 681 </font></span>    <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>using</strong></font> measures_def <font color="#006699"><strong>by</strong></font> simp
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 682 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 683 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 684 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 685 </font></span><font color="#009966"><strong>end</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 686 </font></span>
</font></pre>
</body>
</html>
